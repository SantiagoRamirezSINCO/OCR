services:
  api:
    build:
      context: .
      dockerfile: OCRTest/Dockerfile
    container_name: ocrtest-api
    restart: unless-stopped
    environment:
      # Azure Document Intelligence
      AzureDocumentIntelligence__Endpoint: ${AZURE_ENDPOINT}
      AzureDocumentIntelligence__ApiKey: ${AZURE_API_KEY}
      AzureDocumentIntelligence__ModelId: prebuilt-receipt

      # ASP.NET Core
      ASPNETCORE_ENVIRONMENT: ${ASPNETCORE_ENVIRONMENT:-Production}
      ASPNETCORE_URLS: http://+:8080

      # Logging
      Logging__LogLevel__Default: Information
      Logging__LogLevel__Microsoft.AspNetCore: Warning
      Logging__LogLevel__Azure: Warning
    ports:
      - "${API_PORT:-5093}:8080"
    networks:
      - ocrnet

networks:
  ocrnet:
    driver: bridge
